<ul>
<% collection.each(function(model) {
	var type = model.get('type');

if (type == 'IssuesEvent') {
console.log(model);
	var p = model.get('payload'),
		created = model.get('created_at'),
		username = p.issue.user.login,
		action = p.action,
		number = p.issue.number,
		name = model.get('repo').name,
		date = new Date(created).toRelativeTime(),
		title = p.issue.title;
	%>
<li>
	<span class="title"><a href="#"><%= username %></a> <%= action %> <a href="#">issue <%= number %></a> on <a href="#"><%= name %></a> about <%= date %></span>
	<span class="details"><%= title %></span>
</li>

<% } else if (type == 'IssueCommentEvent') {
	var p = model.get('payload'),
		created = model.get('created_at'),
		username = p.issue.user.login,
		type_type = p.issue.pull_request.diff_url? 'pull request': 'issue',
		number = p.issue.number,
		name = model.get('repo').name,
		date = new Date(created).toRelativeTime(),
		details = p.comment.body;
	%>
<li>
	<span class="title"><a href="#"><%= username %></a> commented on <a href="#"><%= type_type %> <%= number %></a> on <a href="#"><%= name %></a> about <%= date %></span>
	<span class="details"><%= details %></span>
</li>

<% } else if (type == 'DeleteEvent') {
	console.log(model);
	var p = model.get('payload'),
		created = model.get('created_at'),
		username = model.get('actor').login,
		ref_type = p.ref_type,
		ref = p.ref,
		name = model.get('repo').name,
		date = new Date(created).toRelativeTime();
	%>
<li>
	<span class="title"><a href="#"><%= username %></a> deleted <%= ref_type %> <%= ref %> at <a href="#"><%= name %></a> on <a href="#"><%= name %></a> about <%= date %></span>
	<span class="details">Deleted <%= ref_type %> was at <em>/<%= name %>/tree/<%= ref %></em></span>
</li>

<% } else { %>
<li>
	<%= type %>
</li>

<% } }); %>
</ul>